<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{/layouts/base}">
<head>
<<<<<<< HEAD
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/travel_review.css}" />
    <title>Ïó¨Ìñâ ÏÉÅÏÑ∏</title>
    <script defer th:src="@{/js/travel_detail.js}"></script>
    <meta name="_csrf">
    <meta name="_csrf_header">
</head>
<body>
<div class="bg-gradient-custom min-vh-100" layout:fragment="content">
    <div class="container py-4">

        <!-- Ïó¨Ìñâ Ï†ïÎ≥¥ ÏóÜÏùå -->
        <div th:if="${travel == null}" class="text-center py-5">
            <h2>Ìï¥Îãπ Ïó¨Ìñâ Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.</h2>
            <a th:href="@{/schedule/list}" class="btn btn-primary mt-3">Î™©Î°ùÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</a>
        </div>

        <!-- Ïó¨Ìñâ Ï†ïÎ≥¥ ÏûàÏùå -->
        <div th:if="${travel != null}">
=======
    <meta charset="UTF-8" />
    <title>[[${travelDetail.title}]] | Ïó¨Ìñâ ÏÉÅÏÑ∏Î≥¥Í∏∞</title>
    <link rel="stylesheet" th:href="@{/css/travel_detail.css}" />
    <th:block layout:fragment="head"></th:block>
    <script defer th:src="@{/js/travel_detail.js}"></script>
</head>
<body>
    <div class="bg-gradient-custom min-vh-100" layout:fragment="content">
        <div class="container py-4">
>>>>>>> spring/travel_article_crud_mgk
            <div class="row mb-4">
                <div class="col-12 text-center">
                    <h1 class="mb-2" th:text="${travelDetail.title}"></h1>
                    <p class="text-muted">
                    <i class="bi bi-geo-alt-fill me-1"></i>
                    <span th:text="${travelDetail.displayLocation}"></span>
                    </p>
                </div>
            </div>

<<<<<<< HEAD
            <div class="row">
                <!-- Ïó¨Ìñâ Ï†ïÎ≥¥ Ïπ¥Îìú -->
                <div class="col-lg-8">
                    <div class="card shadow-sm rounded-4 mb-4">
                        <div class="card-body p-4">

                            <div class="d-flex justify-content-between">
                                <h4 class="card-title fw-bold mb-3">Ïó¨Ìñâ Ï†ïÎ≥¥</h4>
                                <div th:if="${isOwner}">
                                    <a th:href="@{'/schedule/edit?id=' + ${travel.id}}"
                                       class="btn btn-sm btn-outline-secondary">ÏàòÏ†ï</a>
                                    <button id="deleteBtn" 
       										class="btn btn-sm btn-outline-danger" 
        										th:data-id="${travel.id}">
    												ÏÇ≠Ï†ú
									</button>
                                </div>
                            </div>

                            <p class="card-text text-muted" th:text="${travel.content}">Ïó¨Ìñâ ÎÇ¥Ïö©</p>
                            <hr />

                            <!-- Ïó¨Ìñâ ÏÑ∏Î∂Ä Ï†ïÎ≥¥ -->
                            <div class="row text-center mb-3">
                                <div class="col-6 col-md-3 mb-2">
                                    <span class="badge bg-secondary-subtle text-dark">
                                        <i class="bi bi-calendar me-1"></i> <strong>ÏùºÏ†ï</strong>
                                    </span>
                                    <p class="mb-0 mt-1 fs-6"
                                       th:text="${#temporals.format(travel.startDate, 'yyyy. MM. dd')} + ' Î∂ÄÌÑ∞'"></p>
                                    <p class="mb-0 mt-1"
                                       th:text="${#temporals.format(travel.endDate, 'yyyy. MM. dd')} + ' ÍπåÏßÄ'"></p>
                                </div>

                                <div class="col-6 col-md-3 mb-2">
                                    <span class="badge bg-secondary-subtle text-dark">
                                        <i class="bi bi-currency-dollar me-1"></i> <strong>ÏòàÏÉÅ ÏöîÍ∏à</strong>
                                    </span>
                                    <p class="mb-0 mt-1"
                                       th:text="${#numbers.formatInteger(travel.estimatedCost, 3, 'COMMA')} + 'Ïõê'"></p>
                                </div>

                                <div class="col-6 col-md-2 mb-2">
                                    <span class="badge bg-secondary-subtle text-dark">
                                        <i class="bi bi-person-circle me-1"></i> <strong>ÏÑ†Ìò∏ Ïó∞Î†π</strong>
                                    </span>
                                    <p class="mb-0 mt-1" th:text="${travel.ageLimit}"></p>
                                </div>

                                <div class="col-6 col-md-2 mb-2">
                                    <span class="badge bg-secondary-subtle text-dark">
                                        <i class="bi bi-people me-1"></i> <strong>Ïù∏Ïõê</strong>
                                    </span>
                                    <p class="mb-0 mt-1" th:text="'3/' + ${travel.maxParticipants} + 'Î™Ö'"></p>
                                </div>

                                <div class="col-6 col-md-2 mb-2">
                                    <span class="badge bg-success-subtle text-dark">
                                        <i class="bi bi-person-plus me-1"></i> <strong>ÏÉÅÌÉú</strong>
                                    </span>
                                    <p class="mb-0 mt-1"
                                       th:text="${travel.status == 'OPEN' ? 'Î™®Ïßë Ï§ë' : travel.status}"></p>
                                </div>
                            </div>

                            <!-- ÌÉúÍ∑∏ -->
                            <div class="mb-3 no-hover-effects">
                                <span class="badge tag-item px-3 py-2 rounded-pill">üçú ÏãùÎèÑÎùΩ</span>
                                <span class="badge tag-item px-3 py-2 rounded-pill">‚ô®Ô∏è Ïò®Ï≤ú</span>
                                <span class="badge tag-item px-3 py-2 rounded-pill">üèõÔ∏è Î¨∏Ìôî</span>
                            </div>

                            <!-- Ïù¥ÎØ∏ÏßÄ -->
                            <div class="row g-2" th:if="${images != null and !#lists.isEmpty(images)}">
                                <div class="col-4" th:each="image : ${images}">
                                    <img th:src="${image.imagePath}" class="img-fluid rounded-3" alt="Ïó¨Ìñâ Ïù¥ÎØ∏ÏßÄ" />
                                </div>
=======
        <div class="row">
            <div class="col-lg-8">
                <div class="card shadow-sm rounded-4 mb-4">
                    <div class="card-body p-4">
                        <h4 class="card-title fw-bold mb-3">Ïó¨Ìñâ Ï†ïÎ≥¥</h4>
                        <p class="card-text text-muted" th:text="${travelDetail.content}"></p>
                        <hr/>
                        <div class="row text-center mb-3">
                            <div class="col-6 col-md-2 mb-2">
                                <span class="badge bg-secondary-subtle text-dark">
                                    <i class="bi bi-calendar me-1"></i><strong>ÏùºÏ†ï</strong>
                                </span>
                                <p class="mb-0 mt-1 fs-6" th:text="${#temporals.format(travelDetail.startDate, 'yyyy. MM. dd')}">
                                </p>
                                <p class="mb-0 mt-1" th:text="${#temporals.format(travelDetail.endDate, 'yyyy. MM. dd')}">
                                </p>
                            </div>
                            <div class="col-6 col-md-2 mb-2">
                                <span class="badge bg-secondary-subtle text-dark">
                                    <i class="bi bi-currency-yen me-1"></i><strong>ÏòàÏÉÅ ÏöîÍ∏à</strong>
                                </span>
                                <p class="mb-0 mt-1" th:text="${#numbers.formatDecimal(travelDetail.estimatedCost, 0, 'COMMA', 0, 'POINT')} + 'Ïóî'">
                                </p>
                            </div>
                            <div class="col-6 col-md-2 mb-2">
                                <span class="badge bg-secondary-subtle text-dark">
                                    <i class="bi bi-gender-ambiguous me-1"></i><strong>ÏÑ±Î≥Ñ Ï†úÌïú</strong>
                                </span>
                                <p class="mb-0 mt-1" th:text="${travelDetail.displayGenderLimit}"></p>
                            </div>
                            <div class="col-6 col-md-2 mb-2">
                                <span class="badge bg-secondary-subtle text-dark">
                                    <i class="bi bi-person-circle me-1"></i><strong>Ïó∞Î†π Ï†úÌïú</strong>
                                </span>
                                <p class="mb-0 mt-1" th:text="${travelDetail.ageLimit ?: 'Ï†úÌïú ÏóÜÏùå'}"></p>
>>>>>>> spring/travel_article_crud_mgk
                            </div>
                            <div class="col-6 col-md-2 mb-2">
                                <span class="badge bg-secondary-subtle text-dark">
                                    <i class="bi bi-people me-1"></i><strong>Ïù∏Ïõê</strong>
                                </span>
                                <p class="mb-0 mt-1" th:text="|0/${travelDetail.maxParticipants}Î™Ö|"></p>
                            </div>
                            <div class="col-6 col-md-2 mb-2">
                                <span
                                    th:class="${travelDetail.status == 'OPEN' ? 'badge bg-success-subtle text-dark' : 
                                                travelDetail.status == 'MATCHED' ? 'badge bg-danger-subtle text-dark' : 
                                                travelDetail.status == 'CLOSED' ? 'badge bg-warning-subtle text-dark' : 
                                                'badge bg-secondary-subtle text-dark'}">
                                    <i class="bi bi-person-plus me-1"></i><strong>ÏÉÅÌÉú</strong>
                                </span>
                                <p class="mb-0 mt-1" th:text="${travelDetail.displayStatus}"></p> 
                            </div>
                        </div>

                        <div class="mb-3 no-hover-effects">
                        <span class="badge tag-item px-3 py-2 rounded-pill"
                            th:each="tagDisplay : ${travelDetail.displayTags}"
                            th:text="${tagDisplay}"> 
                        </span>
                        </div>
                        <div class="row g-2 justify-content-center travel-images-container">
                            <div class="col-2" th:each="image, stat : ${travelDetail.images}" th:if="${stat.index < 5}">
                                <img class="travel-image" th:src="${image.imagePath}" alt="Ïó¨Ìñâ Ïù¥ÎØ∏ÏßÄ"/> 
                            </div>
                        </div>
                    </div>
                </div>
            </div>

<<<<<<< HEAD
                <div class="col-lg-4">
                        <form id="joinForm" th:action="@{/join-request}" method="post">
                            <input type="hidden" name="tripArticleId" th:value="${travel.id}">
                            <input type="hidden" name="hostUserId" th:value="${travel.hostUserId}">
                            <input type="hidden" name="chatRoomId" th:value="${chatRoomId}">
                                 <div class="card shadow-sm rounded-4 p-4 sticky-top" style="top: 20px">
                                  <div class="text-center mb-3">
                            <img src="/image/testuser.jpg" alt="ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ" class="rounded-circle mb-2"
                                 style="width: 80px; height: 80px; object-fit: cover" />
                            <h5 class="mb-0">Ïó¨Ìñâ ÏûëÏÑ±Ïûê</h5>
                            <small class="text-muted">@ÍπÄÎØºÏßÄ</small>
                        </div>
                        <div class="d-grid mb-3">
                            
                            <button id="joinBtn" type="button" class="btn btn-wakutabi-primary btn-lg">Ï∞∏Í∞Ä Ïã†Ï≤≠ÌïòÍ∏∞</button>
                        </div>
                        <p class="text-muted text-center small">Ïó¨Ìñâ Ï∞∏Í∞Ä Ïã†Ï≤≠ Ïãú, ÏûëÏÑ±ÏûêÏóêÍ≤å ÏïåÎ¶ºÏù¥ Ï†ÑÏÜ°Îê©ÎãàÎã§.</p>
                        <hr />
                        <h6 class="fw-bold mb-3">Ï∞∏Ïó¨Ïûê Î™©Î°ù</h6>
                        <ul class="list-unstyled">
                            <li class="d-flex align-items-center mb-2">
                                <img src="/image/testuser.jpg" style="width:55px; height:55px;" alt="Ï∞∏Ïó¨Ïûê" class="participant-avatar" />
                                <span class="ms-2">Î∞ïÏßÄÌõà</span>
                            </li>
                        </ul>
                    </div>
                    </form>
=======
            <div class="col-lg-4">
            <div class="card shadow-sm rounded-4 p-4 sticky-top" style="top: 20px">
                <div class="text-center mb-3">
                    <img class="rounded-circle mb-2" src="/image/testuser.jpg" alt="ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ"
                        style="width: 80px; height: 80px; object-fit: cover"/>
                    <h5 class="mb-0">Ïó¨Ìñâ ÏûëÏÑ±Ïûê</h5>
                    <small class="text-muted">@ÍπÄÎØºÏßÄ</small>
>>>>>>> spring/travel_article_crud_mgk
                </div>
                <div class="d-grid mb-3">
                    <button class="btn btn-wakutabi-primary btn-lg">
                    Ï∞∏Í∞Ä Ïã†Ï≤≠ÌïòÍ∏∞
                    </button>
                </div>
                <p class="text-muted text-center small">
                    Ïó¨Ìñâ Ï∞∏Í∞Ä Ïã†Ï≤≠ Ïãú, ÏûëÏÑ±ÏûêÏóêÍ≤å ÏïåÎ¶ºÏù¥ Ï†ÑÏÜ°Îê©ÎãàÎã§.
                </p>
                <hr/>
                <h6 class="fw-bold mb-3">Ï∞∏Ïó¨Ïûê Î™©Î°ù</h6>
                <ul class="list-unstyled">
                    <li class="d-flex align-items-center mb-2">
                        <img class="participant-avatar" src="/image/testuser.jpg" alt="Ï∞∏Ïó¨Ïûê"
                        style="width: 55px; height: 55px"/>
                        <span class="ms-2">Î∞ïÏßÄÌõà</span>
                    </li>
                    <li class="d-flex align-items-center mb-2">
                        <img class="participant-avatar" src="/image/testuser.jpg" alt="Ï∞∏Ïó¨Ïûê"
                        style="width: 55px; height: 55px"/>
                        <span class="ms-2">Î∞ïÏßÄÌõà</span>
                    </li>
                    <li class="d-flex align-items-center mb-2">
                        <img class="participant-avatar" src="/image/testuser.jpg" alt="Ï∞∏Ïó¨Ïûê"
                        style="width: 55px; height: 55px"/>
                        <span class="ms-2">Î∞ïÏßÄÌõà</span>
                    </li>
                    <li class="d-flex align-items-center mb-2">
                        <img class="participant-avatar" src="/image/testuser.jpg" alt="Ï∞∏Ïó¨Ïûê"
                        style="width: 55px; height: 55px"/>
                        <span class="ms-2">Î∞ïÏßÄÌõà</span>
                    </li>
                    <li class="d-flex align-items-center mb-2">
                        <img class="participant-avatar" src="/image/testuser.jpg" alt="Ï∞∏Ïó¨Ïûê"
                        style="width: 55px; height: 55px"/>
                        <span class="ms-2">Î∞ïÏßÄÌõà</span>
                    </li>
                </ul>
            </div>
            </div>
        </div>
        </div>
    </div>
<<<<<<< HEAD
</div>
=======
>>>>>>> spring/travel_article_crud_mgk
</body>
</html>
